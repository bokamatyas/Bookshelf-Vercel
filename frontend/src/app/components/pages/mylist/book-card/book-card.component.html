<mat-card class="drg-book-card h-100 p-3">
    <mat-card-header class="centered-header">
        <mat-card-title>{{ book.title }}</mat-card-title>
        <mat-card-subtitle>{{ book.author }}</mat-card-subtitle>
    </mat-card-header>
    <img mat-card-image [src]="book.imageUrl ?? './assets/images/no-cover.svg'" alt="{{ book.title }}"
        class="book-image">

    <mat-card-actions class="d-flex justify-content-between">
        <!-- For "toRead" type: show mark as favorite & delete -->
        <ng-container *ngIf="cardType === 'toRead'">
            <button mat-raised-button color="accent" class="rounded w-100" (click)="onMarkAsFavorite()"
                matTooltip="Favorite Book" matTooltipPosition="above">
                <mat-icon>star</mat-icon> Favorite
            </button>
            <button mat-raised-button color="warn" class="rounded w-100" (click)="onDeleteBook()"
                matTooltip="Delete Book" matTooltipPosition="above">
                <mat-icon>delete</mat-icon> Delete
            </button>
        </ng-container>

        <!-- For "reading" type: show mark as favorite & drop -->
        <ng-container *ngIf="cardType === 'reading'">
            <button mat-raised-button color="accent" class="rounded w-100" (click)="onMarkAsFavorite()"
                matTooltip="Favorite Book" matTooltipPosition="above">
                <mat-icon>star</mat-icon> Favorite
            </button>
            <button mat-raised-button color="warn" class="rounded w-100" (click)="onDropBook()" matTooltip="Drop Book"
                matTooltipPosition="above">
                <mat-icon>delete</mat-icon> Drop
            </button>
        </ng-container>

        <!-- For "finished" type: conditionally show Favorite or Remove button, plus Delete -->
        <ng-container *ngIf="cardType === 'finished'">
            <ng-container *ngIf="isFavorite; else notFav">
                <button mat-raised-button color="accent" class="rounded w-100" (click)="onFinishReading()"
                    matTooltip="Remove Favorite" matTooltipPosition="above">
                    <mat-icon>star</mat-icon> Remove
                </button>
            </ng-container>
            <ng-template #notFav>
                <button mat-raised-button color="accent" class="rounded w-100" (click)="onMarkAsFavorite()"
                    matTooltip="Favorite Book" matTooltipPosition="above">
                    <mat-icon>star</mat-icon> Favorite
                </button>
            </ng-template>
            <button mat-raised-button color="warn" class="rounded w-100" (click)="onDeleteBook()"
                matTooltip="Delete Book" matTooltipPosition="above">
                <mat-icon>delete</mat-icon> Delete
            </button>
        </ng-container>

        <!-- For "dropped" type: show start reading & delete -->
        <ng-container *ngIf="cardType === 'dropped'">
            <button mat-raised-button color="primary" class="rounded w-100" (click)="onStartReading()"
                matTooltip="Start Reading" matTooltipPosition="above">
                <mat-icon>book</mat-icon> Read
            </button>
            <button mat-raised-button color="warn" class="rounded w-100" (click)="onDeleteBook()"
                matTooltip="Delete Book" matTooltipPosition="above">
                <mat-icon>delete</mat-icon> Delete
            </button>
        </ng-container>

        <!-- For "favorite" type: show just a remove button -->
        <ng-container *ngIf="cardType === 'favorite'">
            <button mat-raised-button color="warn" class="rounded w-100" (click)="onFinishReading()"
                matTooltip="Remove from Favorites" matTooltipPosition="above">
                <mat-icon>remove_circle</mat-icon> Remove
            </button>
        </ng-container>
    </mat-card-actions>
</mat-card>