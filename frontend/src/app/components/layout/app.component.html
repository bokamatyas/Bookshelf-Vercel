<ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" type="line-scale">
    <p style="font-size: 20px; color: white">{{ "APP.SPINNER" | translate }}</p>
</ngx-spinner>
<app-navbar (sidenavToggleClicked)="drawer.toggle()"></app-navbar>
<mat-drawer-container autosize hasBackdrop="true">
    <mat-drawer #drawer mode="over" (window:resize)="drawer.opened=false">
        <div class="sidenav-column">
            <button mat-button routerLink="home" (click)="drawer.opened=false" [disabled]="isActive('/home')">
                <mat-icon>home</mat-icon>
                {{ 'APP.MENU.HOME' | translate}}
            </button>
            <button mat-button routerLink="books" (click)="drawer.opened=false" [disabled]="isActive('/books')">
                <mat-icon>library_books</mat-icon>
                {{ 'APP.MENU.BOOKS' | translate}}
            </button>
            <button mat-button routerLink="summaries" (click)="drawer.opened=false" [disabled]="isActive('/summaries')">
                <mat-icon>notes</mat-icon>
                {{ 'APP.MENU.SUMMARIES' | translate}}
            </button>
            @if(authService.getloggedInUser && ['user', 'editor', 'admin'].includes(authService.getloggedInUser.role)){
            <button mat-button routerLink="mylist" (click)="drawer.opened=false" [disabled]="isActive('/mylist')">
                <mat-icon>list_alt</mat-icon>
                {{ 'APP.MENU.MYLIST' | translate}}
            </button>
            }
            <hr>
            @if(!authService.getloggedInUser){
            <button mat-button routerLink="auth/login" (click)="drawer.opened=false"
                [disabled]="isActive('/auth/login')">
                <mat-icon>login</mat-icon>
                {{ 'APP.MENU.LOGIN' | translate}}
            </button>
            <button mat-button routerLink="auth/register" (click)="drawer.opened=false"
                [disabled]="isActive('/auth/register')">
                <mat-icon>person_add</mat-icon>
                {{ 'APP.MENU.REGISTER' | translate}}
            </button>
            } @else{
            <!-- <button mat-menu-item (click)="drawer.opened=false; authService.logOut()">
                <mat-icon>home</mat-icon>
                {{ 'APP.MENU.LOGOUT' | translate}}
            </button> -->
            <mat-accordion>
                <mat-expansion-panel hideToggle #panel class="mat-elevation-z0">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            <mat-icon>account_circle</mat-icon>
                            {{ this.authService.getloggedInUser.username }}
                        </mat-panel-title>
                    </mat-expansion-panel-header>                    
                    <button mat-button routerLink="profile" (click)="drawer.opened=false; panel.close()"
                        [disabled]="isActive('/auth/register')">
                        <mat-icon>person</mat-icon>
                        {{ 'APP.MENU.PROFILE.PAGE' | translate}}
                    </button>
                    <button mat-button routerLink (click)="drawer.opened=false; panel.close(); authService.logOut()">
                        <mat-icon>exit_to_app</mat-icon>
                        {{ 'APP.MENU.PROFILE.LOGOUT' | translate}}
                    </button>
                </mat-expansion-panel>
            </mat-accordion>
            }
        </div>
    </mat-drawer>

    <mat-drawer-content>
        <router-outlet></router-outlet>
    </mat-drawer-content>

</mat-drawer-container>
<app-footer></app-footer>